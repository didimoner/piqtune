function explode(t,e){var o={0:""};return 2!=arguments.length||"undefined"==typeof arguments[0]||"undefined"==typeof arguments[1]?null:""===t||t===!1||null===t?!1:"function"==typeof t||"object"==typeof t||"function"==typeof e||"object"==typeof e?o:(t===!0&&(t="1"),e.toString().split(t.toString()))}$(function(){$(".emotions li img").click(function(){var t=$(this).attr("alt");$(".emotions li").removeClass("active"),$(this).parent().addClass("active"),$('.emotions input[type="hidden"]').val(t)});var t="";$(".creator-form input.tags").on("input",function(){var e=$(this).val(),o=/\s*,\s*/,i=e.split(o);o=/^([A-Za-zА-Яа-я0-9\s-]{0,24})$/;var a=i[i.length-1],n=a.match(o);return!n||i.length>8?void $(this).val(t):void(t=e)}),$(".creator-form input.tags").change(function(){var t=$(this).val().split(/\s*,\s*/);$.each(t,function(e,o){t[e]=$.trim(o),t[e]=t[e].split(/-{2,}/).join("-"),t[e]=t[e].split(/\s{2,}/).join(" ")}),$(this).val(t.clean("").join(", "))}),$(".tags").tagEditor({initialTags:explode(",",$(".initial_tags").val()),maxTags:8,maxLength:32,placeholder:"Введите от 2 до 8 тегов...",autocomplete:{delay:300,minLength:2,position:{collision:"flip"},source:function(t,e){$.ajax({method:"GET",url:"/posts/ajax_tag_autocomplete",data:{tag:t.term},beforeSend:function(){$(".ui-autocomplete").addClass("ui-autocomplete-loading"),e([" "])},success:function(t){$(".ui-autocomplete").removeClass("ui-autocomplete-loading"),obj=JSON.parse(t),last_response=obj,e(obj)},error:function(t){$(".ui-autocomplete").removeClass("ui-autocomplete-loading")}})}},beforeTagSave:function(t,e,o,i,a){if(a.length<3)return!1;var n=/^([A-Za-zА-Яа-я0-9\s-]{0,24})$/;return a.match(n)?void 0:(alert("Используйте только буквы, цифры, пробелы и знак тире."),!1)}})}),Array.prototype.clean=function(t){for(var e=0;e<this.length;e++)this[e]==t&&(this.splice(e,1),e--);return this};