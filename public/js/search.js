function explode(t,e){var a={0:""};return 2!=arguments.length||"undefined"==typeof arguments[0]||"undefined"==typeof arguments[1]?null:""===t||t===!1||null===t?!1:"function"==typeof t||"object"==typeof t||"function"==typeof e||"object"==typeof e?a:(t===!0&&(t="1"),e.toString().split(t.toString()))}$(function(){$(".search-wrapper i.close").click(function(){$(".search-wrapper input[type='search']").val("")}),$(".emotions li img").click(function(){var t=$(this).attr("alt");$(".emotions li").removeClass("active"),$(this).parent().addClass("active");var e="none"!=t?t:"";$('.emotions input[type="hidden"]').val(e)}),$(".search-wrapper .reset").click(function(){$(".search-wrapper input[type='search']").val(""),$("#search-form .emotions input[type='hidden']").val(""),$("#search-form .emotions li").removeClass("active"),$("#search-form .emotions li").last().addClass("active");var t=$(".tags").tagEditor("getTags")[0].tags;for(i=0;i<t.length;i++)$(".tags").tagEditor("removeTag",t[i])});var t=[];$(".tags").tagEditor({initialTags:explode(",",$(".initial_tags").val()),maxTags:8,maxLength:24,placeholder:"Введите до 8 тегов...",autocomplete:{delay:300,minLength:2,position:{collision:"flip"},source:function(e,a){$.ajax({method:"GET",url:"/posts/ajax_tag_autocomplete",data:{tag:e.term},beforeSend:function(){$(".ui-autocomplete").addClass("ui-autocomplete-loading"),a([" "])},success:function(e){$(".ui-autocomplete").removeClass("ui-autocomplete-loading"),obj=JSON.parse(e),t=obj,a(obj)},error:function(t){$(".ui-autocomplete").removeClass("ui-autocomplete-loading")}})}},beforeTagSave:function(e,a,o,i,n){if(n.length<3)return!1;if(-1==$.inArray(n,t))return!1;var r=/^([A-Za-zА-Яа-я0-9\s-]{0,24})$/;return n.match(r)?void 0:(alert("Используйте только буквы, цифры, пробелы и знак тире."),!1)}}),$("#search-form button[type='submit']").click(function(){var t=$("#search-form input[type='search']").val(),e=$("#search-form .emotions input[type='hidden']").val(),a=$(".tags").tagEditor("getTags")[0].tags;return 0==t.length&&0==a.length&&0==e.length?(alert("Не выбраны пораметры поиска."),!1):void 0})});