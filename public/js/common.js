!function(t){t(function(){new Clipboard(".copy");var a=!1,e=0;t(".button-collapse").sideNav(),t(document).scroll(function(){var a=t(window).height(),o=t(document).scrollTop();o>2*a&&t("#page-up").show(),o>e&&(t("#page-up").attr("class","down"),t("#page-up").find("i").html("arrow_upward"))}),t("#page-up").click(function(){"down"==t(this).attr("class")?(e=t(document).scrollTop(),t("body,html").animate({scrollTop:0},300),t(this).attr("class","up"),t(this).find("i").html("arrow_downward")):(t("body,html").animate({scrollTop:e},300),t(this).attr("class","down"),t(this).find("i").html("arrow_upward"))}),t(".search-toggle").click(function(){a=!0,t(".search-panel").attr("show")?(t(".search-panel").transition({y:"-80px"}),t(".search-panel").removeAttr("show")):(t(".search-panel").transition({y:"80px"}),t(".search-panel input").focus(),t(".search-panel").attr("show","true"))}),t(".search-panel").click(function(){a=!0}),t("body").click(function(){return a?void(a=!1):void(t(".search-panel").attr("show")&&(t(".search-panel").transition({y:"-70px"}),t(".search-panel").removeAttr("show")))}),t(".section").on("click",".star",function(){var a=t("._token").val(),e=t(this).attr("id"),o=t(this).attr("mode"),r=t(this);t.ajax({url:"/posts/change_rating",method:"POST",data:{_token:a,id:e,mode:o},success:function(a){"inc"==o?(r.attr("mode","dec"),r.find("i").html("star"),r.attr("title","Убрать из избранного"),t(".full-item .star .a-text").html("Убрать из избранного"),Materialize.toast("Добавлено в избранное",4e3)):(r.attr("mode","inc"),r.find("i").html("star_border"),r.attr("title","Добавить в избранное"),t(".full-item .star .a-text").html("Добавить в избранное"),Materialize.toast("Удалено из избранного",4e3));var e=JSON.parse(a);r.parent().parent().find(".rating-text").html(e.rating),t("._token").val(e._token)},error:function(){}})}),t(".modal-trigger").leanModal(),t("#modal-messages").attr("class")&&t("#modal-messages").openModal(),t(".send-report").click(function(){var a=t("#modal-bug textarea").val(),e=t("._token").val();return a.length<5||a.length>2048?void alert("Допустимая длина сообщения от 5 до 2048 символов."):void t.ajax({url:"/main/ajax_send_report",method:"POST",data:{_token:e,message:a},success:function(a){t("._token").val(a),Materialize.toast("Сообщение отправлено, спасибо!",4e3),t("#modal-bug textarea").val(""),t("#modal-bug").closeModal()},error:function(){}})}),t(".section").on("click",".report",function(){if(confirm("Вы дейстивтельно хотите отправить жалобу на данный пост?")){var a=t("._token").val(),e=t(this).attr("id");t.ajax({url:"/posts/ajax_report_post",method:"POST",data:{_token:a,id:e},success:function(a){var e=JSON.parse(a);t("._token").val(e._token);var o="";o=e.status?"Жалоба отправлено, спасибо!":"Вы уже отправили жалобу на данный пост.",Materialize.toast(o,4e3)},error:function(){}})}})})}(jQuery);